<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>@ViewBag.Title - Jollibee Việt Nam</title>

    @Styles.Render("~/Content/css")
    <link href="~/Content/Style.css" rel="stylesheet" />
    <link href="~/Content/JollibeeStyles.css" rel="stylesheet" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" />
</head>

<body>
    <header>
        <div class="top-bar">
            <div class="container d-flex justify-content-between align-items-center">
                <div class="top-links">
                    @if (Session["User"] != null)
                    {
                        <div class="dropdown">

                            <a class="nav-link fs-4 text-white dropdown-toggle"
                               href="#"
                               id="userDropdown"
                               role="button"
                               data-bs-toggle="dropdown"
                               aria-expanded="false">
                                <i class="fa fa-user me-2"></i>
                                Xin Chào @((Session["User"] as Web_Do_An_Nhanh.Models.KhachHang).TenKH)
                            </a>

                            <ul class="dropdown-menu dropdown-menu-end shadow border-0 rounded-3 p-0" aria-labelledby="userDropdown">
                                <li>
                                    <a class="dropdown-item text-primary py-2 fw-bold" href="@Url.Action("Index", "Profile")">
                                        <i class="fas fa-cog me-2"></i> Tài khoản của tôi
                                    </a>
                                </li>
                                <li><hr class="dropdown-divider my-0"></li>
                                <li>
                                    <a class="dropdown-item text-danger py-2 fw-bold" href="@Url.Action("Logout", "User")">
                                        <i class="fas fa-sign-out-alt me-2"></i> Đăng xuất
                                    </a>
                                </li>
                            </ul>

                        </div>
                    }
                    else
                    {
                        <a href="@Url.Action("Login", "User")" class="nav-link fs-4 text-white">
                            <i class="fa fa-user me-2"></i> ĐĂNG KÝ / ĐĂNG NHẬP
                        </a>
                    }
                </div>
                <div class="d-flex align-items-center gap-3">
                    <a href="@Url.Action("XemGioHang", "DatHang")" class="nav-link fs-4 text-white position-relative">
                        <i class="fa fa-shopping-cart"></i>
                        @if (Session["SoLuongGioHang"] != null && (int)Session["SoLuongGioHang"] > 0)
                        {
                            <span class="position-absolute top-0 start-100 translate-middle text-white fw-bold" style="font-size: 0.8rem;">
                                @Session["SoLuongGioHang"]
                            </span>
                        }
                    </a>

                </div>
            </div>
        </div>
        <nav class="navbar navbar-expand-lg navbar-light main-navbar">
            <div class="container">

                <a class="navbar-brand fs-4 me-5 pe-5" href="@Url.Action("Index", "Home")">
                    <img src="~/Content/Images/logo_1.png" alt="Jollibee" />
                </a>

                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#mainNavMenu">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <div class="collapse navbar-collapse ms-5" id="mainNavMenu">

                    <ul class="navbar-nav me-auto mb-2 mb-lg-0 fs-4">
                        <li class="nav-item">
                            @Html.ActionLink("Trang chủ", "Index", "Home", null, new { @class = "nav-link" })
                        </li>
                        <li class="nav-item">
                            @Html.ActionLink("Về Jollibee", "About", "Home", null, new { @class = "nav-link" })
                        </li>

                        <li class="nav-item dropdown position-static">
                            <a class="nav-link dropdown-toggle" href="@Url.Action("Index", "SanPhams")">
                                Thực đơn
                            </a> @Html.Action("DropdownMenu", "SanPhams")
                        </li>

                        <li class="nav-item">
                            @Html.ActionLink("Liên hệ", "Contact", "Home", null, new { @class = "nav-link" })
                        </li>
                    </ul>

                    <!-- SEARCH (đẩy sang phải bằng ms-auto) -->
                    <div class="ms-lg-auto mt-3 mt-lg-0">
                        @using (Html.BeginForm("TimKiem", "SanPhams", FormMethod.Post, new { @class = "delivery-search-bar d-flex" }))
                        {
                            <input name="keyword" type="text" class="form-control" placeholder="Nhập món..">
                            <button type="submit" class="btn btn-search ms-2">
                                <i class="fa fa-search"></i>
                            </button>
                        }
                    </div>

                </div>
            </div>
        </nav>



    </header>
    @if (TempData["SuccessMessage"] != null)
    {
        <div class="alert alert-success alert-dismissible fade show" role="alert">
            @TempData["SuccessMessage"]
            <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
        </div>
    }

    <main>
        @RenderBody()
    </main>

    <footer class="main-footer">
        <div class="container"> 
            <div class="row gy-4"> 
                <div class="col-lg-4 col-md-6"> 
                    <img src="~/Content/Images/logo_1.png" alt="Jollibee" class="footer-logo" /> 
                    <h5>CÔNG TY TNHH JOLLIBEE VIỆT NAM</h5> 
                    <p>Địa chỉ:140 Lê Trọng Tấn, Quận Tân Phú, TP.HCM</p>   
                    <p>Điện thoại: (028) 39309168</p> <p>Tổng đài: 1900-1533</p> 
                </div> <div class="col-lg-3 col-md-6"> <h5 class="d-none d-lg-block">&nbsp;
                </h5> <div class="mb-3"> <div class="hotline">1900-1533</div> 
                <div class="hotline-desc">GIAO HÀNG TẬN NƠI</div> 
                        </div> </div> <div class="col-lg-3"> 
                <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3919.0673477335836!2d106.6286656!3d10.8061539!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x31752be27d8b4f4d%3A0x92dcba2950430867!2zVHLGsOG7nW5nIMSQ4bqhaSBo4buNYyBDw7RuZyBUaMawxqFuZyBUUC4gSOG7kyBDaMOtIE1pbmggKEhVSVQp!5e0!3m2!1svi!2s!4v1763834548452!5m2!1svi!2s" width="500" height="450" style="border:0;" allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe> 
                        </div> 
                </div> 
            </div>    
    </footer>   

    @Scripts.Render("~/bundles/jquery")
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

    <!-- BONG BÓNG CHAT -->
    <div id="chatBubble" onclick="goToChatPage()">
        <i class="fas fa-comment"></i>
    </div>

    <style>
        #chatBubble {
            position: fixed;
            bottom: 20px;
            right: 20px;
            width: 60px;
            height: 60px;
            background-color: #ff4500;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            justify-content: center;
            align-items: center;
            box-shadow: 0 4px 8px rgba(0,0,0,0.3);
            transition: transform 0.2s;
            z-index: 1000;
        }

            #chatBubble:hover {
                transform: scale(1.1);
            }

            #chatBubble i {
                color: white;
                font-size: 24px;
            }
    </style>

    <script>
    function goToChatPage() {
        // đổi controller/action nếu cần
        window.location.href = '@Url.Action("Index", "ChatBot")';
    }
    </script>

    @RenderSection("scripts", required: false)
</body>
</html>